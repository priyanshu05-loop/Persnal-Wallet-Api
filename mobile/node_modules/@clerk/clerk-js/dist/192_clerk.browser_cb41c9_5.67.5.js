"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["192"],{8493:function(e,t,r){r.d(t,{l:()=>f});var i=r(9180),a=r(3531),n=r(3799),o=r(9144),l=r(3812),s=r(3064),c=r(7718),d=r(5872),u=r(1085),p=r(1201),m=r(43),g=r(408);let h=e=>/^\S+@\S+\.\S+$/.test(e),f=e=>{let{onSuccess:t,onReset:r,resetButtonLabel:l}=e,{organization:d,invitations:g}=(0,n.o8)({invitations:{pageSize:10,keepPreviousData:!0}}),f=(0,c.useCardState)(),{t:x,locale:Z}=(0,u.zJ)(),[_,z]=(0,o.useState)(!1),S=(0,m.Yp)("emailAddress","",{type:"text",label:(0,u.u1)("formFieldLabel__emailAddresses")}),y=v(),C=(0,m.Yp)("role","",{label:(0,u.u1)("formFieldLabel__role")});if((0,o.useEffect)(()=>{!C.value&&y&&C.setValue(y)},[y,C]),!d)return null;let{props:{setError:T,setWarning:$,setSuccess:w,setInfo:k,isFocused:P,validatePassword:B,setHasPassedComplexity:F,hasPassedComplexity:A,feedback:D,feedbackType:R,clearFeedback:X,...K}}=S,I=(!!S.value.length||_)&&!!C.value,E=e=>{let t=new Set([...e.meta?.emailAddresses??[],...e.meta?.identifiers??[]]),r=S.value.split(",");S.setValue(r.filter(e=>!t.has(e)).join(","))};return(0,i.BX)(c.Form.Root,{onSubmit:e=>{if(e.preventDefault(),!I)return;let r=new FormData(e.currentTarget);return d.inviteMembers({emailAddresses:S.value.split(","),role:r.get("role")}).then(async()=>(await g?.revalidate?.(),t?.())).catch(e=>{if(!(0,a.kD)(e)){(0,m.S3)(e,[],f.setError);return}switch(E(e.errors[0]),e.errors?.[0]?.code){case"duplicate_record":{let t=e.errors[0].meta?.emailAddresses||[];f.setError(x((0,u.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed",{email_addresses:(0,m.z$)(t,Z)})));break}case"already_a_member_in_organization":{let t=e.errors[0].longMessage??"",r=t.match(/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/)?.[0];(0,m.S3)(e,[],e=>r?f.setError(x((0,u.u1)("unstable__errors.already_a_member_in_organization",{email:r}))):f.setError(e));break}default:(0,m.S3)(e,[],f.setError)}})},children:[(0,i.tZ)(c.Form.ControlRow,{elementId:S.id,children:(0,i.tZ)(c.TagInput,{...K,autoFocus:!0,validate:h,sx:{width:"100%"},validateUnsubmittedEmail:e=>z(h(e)),placeholder:(0,u.u1)("formFieldInputPlaceholder__emailAddresses")})}),(0,i.BX)(s.Flex,{align:"center",justify:"between",sx:e=>({marginTop:e.space.$2,gap:e.space.$4,flexWrap:"wrap",[p.mqu.sm]:{justifyContent:"center"}}),children:[(0,i.tZ)(b,{...C}),(0,i.BX)(c.FormButtonContainer,{sx:e=>({margin:e.space.$none,flexWrap:"wrap",justifyContent:"center"}),children:[(0,i.tZ)(c.Form.SubmitButton,{block:!1,isDisabled:!I,localizationKey:(0,u.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,i.tZ)(c.Form.ResetButton,{localizationKey:l||(0,u.u1)("userProfile.formButtonReset"),block:!1,onClick:r})]})]})]})},b=e=>{let{options:t,isLoading:r}=(0,d.e)(),{t:a}=(0,u.zJ)();return(0,i.tZ)(c.Form.ControlRow,{elementId:e.id,children:(0,i.tZ)(s.Flex,{direction:"col",gap:2,children:(0,i.tZ)(g.DQ,{...e.props,roles:t,isDisabled:r,onChange:t=>e.setValue(t),triggerSx:e=>({minWidth:e.sizes.$40,justifyContent:"space-between",display:"flex"}),optionListSx:e=>({minWidth:e.sizes.$48}),prefixLocalizationKey:`${a((0,u.u1)("formFieldLabel__role"))}:`})})})},v=()=>{let{options:e}=(0,d.e)(),{organizationSettings:t}=(0,l.useEnvironment)(),r=t.domains.defaultRole;return r||e?.length!==1||(r=e[0].value),r}},5727:function(e,t,r){r.d(t,{N:()=>h,a:()=>f});var i=r(9180),a=r(3799),n=r(6917),o=r(8969),l=r(3812),s=r(3064),c=r(7718),d=r(4709),u=r(3610),p=r(4676);let m=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{let r=(0,p.useRouter)();return(0,i.BX)(s.Flex,{sx:e=>({background:e.colors.$neutralAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,i.tZ)(s.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,i.BX)(s.Text,{children:["This organization is limited to ",(0,n.OR)(t)," members.",(0,i.tZ)("br",{}),(0,i.tZ)(s.Link,{sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>r.navigate((0,n.OR)(e)),children:"Upgrade for unlimited members"})]})]})};var g=r(8493);let h=(0,c.withCardStateProvider)(e=>{let{close:t}=(0,d.XC)(),{onReset:r=t}=e,u=(0,s.localizationKeys)("organizationProfile.invitePage.title"),p=(0,s.localizationKeys)("organizationProfile.invitePage.subtitle"),h=(0,c.useCardState)(),b=(0,o.a2)({onNextStep:()=>h.setError(void 0)}),{organization:v}=(0,a.o8)(),{__unstable_manageBillingUrl:x,__unstable_manageBillingMembersLimit:Z}=(0,l.useOrganizationProfileContext)();if(!v)return null;let _=!!Z&&(0,n.OR)(Z)<=v.pendingInvitationsCount+v.membersCount;return(0,i.BX)(o.en,{...b.props,children:[(0,i.BX)(c.FormContainer,{headerTitle:u,headerSubtitle:p,children:[_&&x&&(0,i.tZ)(m,{__unstable_manageBillingUrl:x,__unstable_manageBillingMembersLimit:Z}),(0,i.tZ)(g.l,{onSuccess:b.nextStep,onReset:r})]}),(0,i.tZ)(c.SuccessPage,{title:u,onFinish:t,contents:(0,i.tZ)(f,{})})]})}),f=()=>(0,i.BX)(s.Flex,{direction:"col",center:!0,gap:4,children:[(0,i.tZ)(c.IconCircle,{boxElementDescriptor:s.descriptors.invitationsSentIconBox,iconElementDescriptor:s.descriptors.invitationsSentIcon,icon:u.GT}),(0,i.tZ)(s.Text,{localizationKey:(0,s.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},408:function(e,t,r){r.d(t,{DQ:()=>u,RN:()=>d,wQ:()=>s});var i=r(9180),a=r(9144),n=r(3064),o=r(7718),l=r(5872);let s=e=>{let{headers:t,page:r,onPageChange:a,rows:l,isLoading:s,itemCount:d,itemsPerPage:u,pageCount:p,emptyStateLocalizationKey:m}=e,g=d>0?Math.max(0,(r-1)*u)+1:0,h=Math.min(r*u,d);return(0,i.BX)(n.Col,{gap:4,sx:{width:"100%"},children:[(0,i.tZ)(n.Flex,{sx:e=>({overflowX:"auto",padding:e.space.$1}),children:(0,i.BX)(n.Table,{children:[(0,i.tZ)(n.Thead,{children:(0,i.tZ)(n.Tr,{children:t.map((e,t)=>(0,i.tZ)(n.Th,{elementDescriptor:n.descriptors.tableHead,localizationKey:e},t))})}),(0,i.tZ)(n.Tbody,{children:s?(0,i.tZ)(n.Tr,{children:(0,i.tZ)(n.Td,{colSpan:4,children:(0,i.tZ)(n.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:n.descriptors.spinner})})}):l.length?l:(0,i.tZ)(c,{localizationKey:m},"empty")})]})}),p>1&&(0,i.tZ)(o.Pagination,{count:p,page:r,onChange:a,siblingCount:1,rowInfo:{allRowsCount:d,startingRow:g,endingRow:h}})]})},c=e=>(0,i.tZ)(n.Tr,{children:(0,i.tZ)(n.Td,{colSpan:4,children:(0,i.tZ)(n.Text,{localizationKey:e.localizationKey,sx:{margin:"auto",display:"block",width:"fit-content"}})})}),d=e=>(0,i.tZ)(n.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$neutralAlpha50}})}),u=e=>{let{value:t,roles:r,onChange:s,isDisabled:c,triggerSx:d,optionListSx:u,prefixLocalizationKey:m}=e,{localizeCustomRole:g}=(0,l.q)(),h=(0,a.useMemo)(()=>[...r||[]],[r]),f=(0,a.useMemo)(()=>h.find(e=>e.value===t),[h]),{t:b}=(0,n.useLocalizations)(),v=(0,a.useMemo)(()=>h.map(e=>({value:e.value,label:g(e.value)||e.label})),[h,g]);return(0,i.BX)(o.Select,{elementId:"role",options:v,value:t,placeholder:b((0,n.localizationKeys)("organizationProfile.invitePage.selectDropdown__role")),onChange:e=>s(e.value),renderOption:(e,t,r)=>(0,i.tZ)(p,{isSelected:r,option:e,sx:e=>({"&:hover":{backgroundColor:e.colors.$neutralAlpha100},'&[data-focused="true"]':{backgroundColor:e.colors.$neutralAlpha150}})}),children:[(0,i.tZ)("input",{name:"role",type:"hidden",value:t}),(0,i.tZ)(o.SelectButton,{sx:d||(e=>({color:e.colors.$colorText,backgroundColor:"transparent",textWrap:"nowrap"})),isDisabled:c,children:(f?.label||f?.value)&&(0,i.BX)(n.Flex,{as:"span",gap:1,children:[m&&(0,i.tZ)(n.Text,{as:"span",colorScheme:"secondary",localizationKey:m}),(0,i.tZ)(n.Text,{as:"span",sx:e=>({color:e.colors.$colorText}),children:g(f?.value)||f?.label})]})}),(0,i.tZ)(o.SelectOptionList,{sx:u})]})},p=(0,a.memo)(e=>{let{option:t,isSelected:r,sx:a,...o}=e;return(0,i.tZ)(n.Flex,{sx:[e=>({width:"100%",padding:`${e.space.$2} ${e.space.$4}`,borderRadius:e.radii.$md}),a],...o,children:(0,i.tZ)(n.Text,{colorScheme:"secondary",children:t?.label})})})},8181:function(e,t,r){r.d(t,{D:()=>l});var i=r(9180),a=r(3064),n=r(7718),o=r(1085);let l=e=>{let{organization:t,...r}=e;return(0,i.BX)(a.Col,{elementDescriptor:a.descriptors.organizationAvatarUploaderContainer,children:[(0,i.tZ)(a.Text,{variant:"subtitle",sx:e=>({textAlign:"left",marginBottom:e.space.$2}),localizationKey:(0,o.u1)("organizationProfile.start.profileSection.uploadAction__title")}),(0,i.tZ)(n.AvatarUploader,{...r,title:(0,o.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,i.tZ)(n.OrganizationAvatar,{size:e=>e.sizes.$16,...t})})]})}},7484:function(e,t,r){r.d(t,{AO:()=>i,Sz:()=>a});let i={userMemberships:{infinite:!0},userInvitations:{infinite:!0},userSuggestions:{infinite:!0,status:["pending","accepted"]}},a=(e,t,r)=>{if(void 0===t)return[{data:[e],total_count:1}];let i=t?.[t.length-1]?.total_count||1;return t.map(t=>{if(void 0===t)return t;let a=t.data.map(t=>t.id===e.id?{...e}:t);return{...t,data:a,total_count:"negative"===r?i-1:i}})}}}]);