"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["645"],{5515:function(e,t,r){r.d(t,{j:()=>b,f:()=>c});var n=r(9180);r(9144);var o=r(3812),i=r(3064),a=r(7718),l=r(4676),s=r(5913);let c=()=>{let{data:e,isLoading:t}=(0,o.useStatements)();return(0,n.tZ)(p,{page:1,onPageChange:e=>{},itemCount:e?.total_count||0,pageCount:1,itemsPerPage:10,isLoading:t,emptyStateLocalizationKey:"No statements to display",headers:["Date","Amount"],rows:(e?.data||[]).map(e=>(0,n.tZ)(d,{statement:e},e.id))})},d=({statement:e})=>{let{timestamp:t,id:r,totals:{grandTotal:o}}=e,{navigate:a}=(0,l.useRouter)();return(0,n.BX)(u,{onClick:()=>{a(`statement/${r}`)},children:[(0,n.BX)(i.Td,{sx:{cursor:"pointer"},children:[(0,n.tZ)(i.Text,{variant:"subtitle",children:new Date(t).toLocaleString("en-US",{month:"long",year:"numeric"})}),(0,n.tZ)(i.Text,{colorScheme:"secondary",variant:"caption",truncate:!0,sx:e=>({marginTop:e.space.$0x5}),children:(0,s.L)(r)})]}),(0,n.tZ)(i.Td,{sx:{cursor:"pointer"},children:(0,n.BX)(i.Text,{colorScheme:"secondary",children:[o.currencySymbol,o.amountFormatted]})})]})},p=e=>{let{headers:t,page:r,onPageChange:o,rows:l,isLoading:s,itemCount:c,itemsPerPage:d,pageCount:p,emptyStateLocalizationKey:u}=e,h=c>0?Math.max(0,(r-1)*d)+1:0,S=Math.min(r*d,c);return(0,n.BX)(i.Col,{gap:4,sx:{width:"100%"},children:[(0,n.tZ)(i.Flex,{sx:e=>({overflowX:"auto",padding:e.space.$1}),children:(0,n.BX)(i.Table,{sx:{tableLayout:"fixed"},children:[(0,n.tZ)(i.Thead,{children:(0,n.tZ)(i.Tr,{children:t.map((e,t)=>(0,n.tZ)(i.Th,{elementDescriptor:i.descriptors.tableHead,localizationKey:e,sx:{width:0===t?"auto":"25%"}},t))})}),(0,n.tZ)(i.Tbody,{children:s?(0,n.tZ)(i.Tr,{children:(0,n.tZ)(i.Td,{colSpan:4,children:(0,n.tZ)(i.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:i.descriptors.spinner})})}):l.length?l:(0,n.tZ)(m,{localizationKey:u},"empty")})]})}),p>1&&(0,n.tZ)(a.Pagination,{count:p,page:r,onChange:o,siblingCount:1,rowInfo:{allRowsCount:c,startingRow:h,endingRow:S}})]})},m=e=>(0,n.tZ)(i.Tr,{children:(0,n.tZ)(i.Td,{colSpan:4,children:(0,n.tZ)(i.Text,{localizationKey:e.localizationKey,sx:{margin:"auto",display:"block",width:"fit-content"}})})}),u=e=>(0,n.tZ)(i.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$neutralAlpha50}})});var h=r(3610),S=r(2464);function y({text:e,copyLabel:t="Copy"}){let{onCopy:r,hasCopied:o}=(0,S.VP)(e);return(0,n.tZ)(i.Button,{elementDescriptor:i.descriptors.statementCopyButton,variant:"unstyled",onClick:r,sx:e=>({color:"inherit",width:e.sizes.$4,height:e.sizes.$4,padding:0,borderRadius:e.radii.$sm,"&:focus-visible":{outline:"2px solid",outlineColor:e.colors.$neutralAlpha200}}),focusRing:!1,"aria-label":o?"Copied":t,children:(0,n.tZ)(i.Icon,{size:"sm",icon:o?h.Jr:h.CK,"aria-hidden":!0})})}let x={Root:function({children:e}){return(0,n.tZ)(i.Box,{elementDescriptor:i.descriptors.statementRoot,as:"article",sx:e=>({borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$lg,overflow:"clip"}),children:e})},Header:function({title:e,id:t,status:r}){return(0,n.BX)(i.Box,{elementDescriptor:i.descriptors.statementHeader,as:"header",sx:e=>({padding:e.space.$4,background:e.colors.$neutralAlpha25,display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),children:[(0,n.BX)(i.Span,{elementDescriptor:i.descriptors.statementHeaderTitleContainer,children:[(0,n.tZ)(i.Heading,{elementDescriptor:i.descriptors.statementHeaderTitle,textVariant:"h2",localizationKey:e}),(0,n.BX)(i.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:[(0,n.tZ)(y,{copyLabel:"Copy statement ID",text:t}),(0,n.tZ)(i.Text,{colorScheme:"secondary",variant:"subtitle",children:(0,s.L)(t)})]})]}),(0,n.tZ)(i.Badge,{elementDescriptor:i.descriptors.statementHeaderBadge,colorScheme:"open"===r?"secondary":"primary",sx:{textTransform:"capitalize"},children:r})]})},Body:function({children:e}){return(0,n.tZ)(i.Box,{elementDescriptor:i.descriptors.statementBody,children:e})},Section:function({children:e}){return(0,n.tZ)(i.Box,{elementDescriptor:i.descriptors.statementSection,as:"section",children:e})},SectionHeader:function({text:e}){return(0,n.tZ)(i.Box,{elementDescriptor:i.descriptors.statementSectionHeader,sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$1,background:e.colors.$neutralAlpha50,borderBlockWidth:e.borderWidths.$normal,borderBlockStyle:e.borderStyles.$solid,borderBlockColor:e.colors.$neutralAlpha100}),children:(0,n.tZ)(i.Heading,{elementDescriptor:i.descriptors.statementSectionHeaderTitle,textVariant:"h3",as:"h2",localizationKey:e,sx:e=>({fontWeight:e.fontWeights.$medium})})})},SectionContent:function({children:e}){return(0,n.tZ)(i.Box,{elementDescriptor:i.descriptors.statementSectionContent,children:e})},SectionContentItem:function({children:e}){return(0,n.tZ)(i.Box,{elementDescriptor:i.descriptors.statementSectionContentItem,sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,"&:not(:first-child)":{borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100}}),children:e})},SectionContentDetailsHeader:function({title:e,description:t,secondaryTitle:r,secondaryDescription:o}){return(0,n.BX)(i.Box,{elementDescriptor:i.descriptors.statementSectionContentDetailsHeader,sx:e=>({marginBlockEnd:e.space.$2,display:"flex",justifyContent:"space-between"}),children:[(0,n.BX)(i.Box,{elementDescriptor:i.descriptors.statementSectionContentDetailsHeaderItem,children:[(0,n.BX)(i.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$1}),children:[(0,n.tZ)(i.Icon,{elementDescriptor:i.descriptors.statementSectionContentDetailsHeaderItemIcon,icon:h.ou,colorScheme:"neutral"}),(0,n.tZ)(i.Heading,{elementDescriptor:i.descriptors.statementSectionContentDetailsHeaderTitle,as:"h3",textVariant:"h3",localizationKey:e})]}),(0,n.tZ)(i.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:i.descriptors.statementSectionContentDetailsHeaderDescription,localizationKey:t})]}),(0,n.BX)(i.Box,{elementDescriptor:i.descriptors.statementSectionContentDetailsHeaderItem,sx:{textAlign:"right"},children:[(0,n.tZ)(i.Text,{variant:"h3",elementDescriptor:i.descriptors.statementSectionContentDetailsHeaderSecondaryTitle,localizationKey:r}),(0,n.tZ)(i.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:i.descriptors.statementSectionContentDetailsHeaderSecondaryDescription,localizationKey:o})]})]})},SectionContentDetailsList:function({children:e}){return(0,n.tZ)(i.Box,{elementDescriptor:i.descriptors.statementSectionContentDetailsList,as:"ul",sx:e=>({margin:0,padding:0,borderWidth:e.borderWidths.$normal,borderStyle:e.borderStyles.$solid,borderColor:e.colors.$neutralAlpha100,borderRadius:e.radii.$md,overflow:"hidden"}),children:e})},SectionContentDetailsListItem:function({labelIcon:e,label:t,valueCopyable:r=!1,value:o,valueTruncated:a=!1}){return(0,n.BX)(i.Box,{elementDescriptor:i.descriptors.statementSectionContentDetailsListItem,as:"li",sx:e=>({margin:0,paddingInline:e.space.$2,paddingBlock:e.space.$1x5,display:"flex",justifyContent:"space-between",flexWrap:"wrap",columnGap:e.space.$2,rowGap:e.space.$0x5,"&:not(:first-child)":{borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100}}),children:[(0,n.BX)(i.Span,{elementDescriptor:i.descriptors.statementSectionContentDetailsListItemLabelContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$1x5}),children:[e?(0,n.tZ)(i.Icon,{icon:e,colorScheme:"neutral"}):null,(0,n.tZ)(i.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:i.descriptors.statementSectionContentDetailsListItemLabel,localizationKey:t})]}),(0,n.tZ)(i.Span,{sx:e=>({display:"flex",alignItems:"center",gap:e.space.$0x25,color:e.colors.$colorTextSecondary}),children:"string"==typeof o?(0,n.BX)(n.HY,{children:[r?(0,n.tZ)(y,{copyLabel:"Copy statement ID",text:o}):null,(0,n.tZ)(i.Text,{colorScheme:"secondary",variant:"caption",elementDescriptor:i.descriptors.statementSectionContentDetailsListItemValue,children:a?(0,s.L)(o):o})]}):(0,n.tZ)(i.Text,{elementDescriptor:i.descriptors.statementSectionContentDetailsListItemValue,colorScheme:"secondary",variant:"caption",localizationKey:o})})]})},Footer:function({label:e,value:t}){return(0,n.BX)(i.Box,{elementDescriptor:i.descriptors.statementFooter,as:"footer",sx:e=>({paddingInline:e.space.$4,paddingBlock:e.space.$3,background:e.colors.$neutralAlpha25,borderBlockStartWidth:e.borderWidths.$normal,borderBlockStartStyle:e.borderStyles.$solid,borderBlockStartColor:e.colors.$neutralAlpha100,display:"flex",justifyContent:"space-between"}),children:[(0,n.tZ)(i.Text,{variant:"h3",localizationKey:e,elementDescriptor:i.descriptors.statementFooterLabel}),(0,n.BX)(i.Span,{elementDescriptor:i.descriptors.statementFooterValueContainer,sx:e=>({display:"flex",alignItems:"center",gap:e.space.$2x5}),children:[(0,n.tZ)(i.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:i.descriptors.statementFooterCurrency,children:"USD"}),(0,n.tZ)(i.Text,{variant:"h3",elementDescriptor:i.descriptors.statementFooterValue,children:t})]})]})}},b=()=>{let{params:e,navigate:t}=(0,l.useRouter)(),{isLoading:r}=(0,o.useStatements)(),{getStatementById:s}=(0,o.useStatementsContext)(),c=e.statementId?s(e.statementId):null;return r?(0,n.tZ)(i.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,n.tZ)(i.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:i.descriptors.spinner})}):c?(0,n.BX)(n.HY,{children:[(0,n.tZ)(a.Header.Root,{sx:e=>({borderBlockEndWidth:e.borderWidths.$normal,borderBlockEndStyle:e.borderStyles.$solid,borderBlockEndColor:e.colors.$neutralAlpha100,marginBlockEnd:e.space.$4,paddingBlockEnd:e.space.$4}),children:(0,n.tZ)(a.Header.BackLink,{onClick:()=>void t("../../",{searchParams:new URLSearchParams("tab=statements")}),children:(0,n.tZ)(a.Header.Title,{localizationKey:"Statements",textVariant:"h2"})})}),(0,n.BX)(x.Root,{children:[(0,n.tZ)(x.Header,{title:new Date(c.timestamp).toLocaleString("en-US",{month:"long",year:"numeric"}),id:c.id,status:c.status}),(0,n.tZ)(x.Body,{children:c.groups.map(e=>(0,n.BX)(x.Section,{children:[(0,n.tZ)(x.SectionHeader,{text:new Date(e.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,n.tZ)(x.SectionContent,{children:e.items.map(e=>(0,n.BX)(x.SectionContentItem,{children:[(0,n.tZ)(x.SectionContentDetailsHeader,{title:e.subscription.plan.name,description:`${e.subscription.amount?.currencySymbol}${e.subscription.amount?.amountFormatted} / ${"month"===e.subscription.planPeriod?"month":"year"}`,secondaryTitle:`${e.amount.currencySymbol}${e.amount.amountFormatted}`,secondaryDescription:""}),(0,n.BX)(x.SectionContentDetailsList,{children:[(0,n.tZ)(x.SectionContentDetailsListItem,{label:"recurring"===e.chargeType?`Paid for ${e.subscription.plan.name} ${e.subscription.planPeriod} plan`:`Subscribed and paid for ${e.subscription.plan.name} ${e.subscription.planPeriod} plan`,labelIcon:"recurring"===e.chargeType?h.uR:h.v3,value:e.id,valueTruncated:!0,valueCopyable:!0}),e.subscription.credit&&e.subscription.credit.amount.amount>0?(0,n.tZ)(x.SectionContentDetailsListItem,{label:"Prorated credit for partial usage of previous subscription ",value:`(${e.subscription.credit.amount.currencySymbol}${e.subscription.credit.amount.amountFormatted})`}):null]})]},e.id))})]},e.timestamp))}),(0,n.tZ)(x.Footer,{label:"Total paid",value:`${c.totals.grandTotal.currencySymbol}${c.totals.grandTotal.amountFormatted}`})]})]}):(0,n.tZ)(i.Text,{children:"Statement not found"})}}}]);