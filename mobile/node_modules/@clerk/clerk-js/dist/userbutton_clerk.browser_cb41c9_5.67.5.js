"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["270"],{9327:function(e,t,o){o.d(t,{fB:()=>d,gW:()=>a,uj:()=>p});var n=o(9180),r=o(4676),s=o(1673),i=o(3812),c=o(3064),l=o(7718),u=o(3610);let d=e=>{let{navigate:t}=(0,r.useRouter)(),{handleManageAccountClicked:o,handleSignOutSessionClicked:u,handleUserProfileActionClicked:d,session:p}=e,{menutItems:a}=(0,i.useUserButtonContext)(),B=e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100,padding:`${e.space.$4} ${e.space.$5}`}),m=async n=>n?.path?(await t(n.path),e?.completedCallback()):n.id===s.Zb.MANAGE_ACCOUNT?await o():n?.open?d(n.open):(n.onClick?.(),e?.completedCallback());return(0,n.tZ)(l.Actions,{role:"menu",elementDescriptor:c.descriptors.userButtonPopoverActions,elementId:c.descriptors.userButtonPopoverActions.setId("singleSession"),sx:e=>({borderTopWidth:e.borderWidths.$normal,borderTopStyle:e.borderStyles.$solid,borderTopColor:e.colors.$neutralAlpha100}),children:a?.map(e=>{let t;return t=Object.values(s.Zb).includes(e.id)?{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId(e.id),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId(e.id),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId(e.id)}:{elementDescriptor:c.descriptors.userButtonPopoverCustomItemButton,elementId:c.descriptors.userButtonPopoverCustomItemButton.setId(e.id),iconBoxElementDescriptor:c.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(e.id),iconElementDescriptor:c.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionItemButtonIcon.setId(e.id)},n.tZ(l.Action,{...t,icon:e.icon,label:e.name,onClick:e.id===s.Zb.SIGN_OUT?u(p):()=>m(e),sx:B,iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4})},e.id)})})},p=e=>{let{navigate:t}=(0,r.useRouter)(),{handleManageAccountClicked:o,handleSignOutSessionClicked:d,handleSessionClicked:p,handleAddAccountClicked:a,handleUserProfileActionClicked:B,session:m,otherSessions:I}=e,{menutItems:A}=(0,i.useUserButtonContext)(),v=async n=>n?.path?(await t(n.path),e?.completedCallback()):n.id===s.Zb.MANAGE_ACCOUNT?await o():n?.open?B(n.open):(n.onClick?.(),e?.completedCallback()),h=A.every(e=>Object.values(s.Zb).includes(e.id));return(0,n.BX)(n.HY,{children:[h?(0,n.tZ)(l.SmallActions,{role:"menu",elementDescriptor:c.descriptors.userButtonPopoverActions,elementId:c.descriptors.userButtonPopoverActions.setId("multiSession"),children:(0,n.BX)(c.Flex,{justify:"between",sx:e=>({marginLeft:e.space.$12,padding:`0 ${e.space.$5} ${e.space.$4}`,gap:e.space.$2}),children:[(0,n.tZ)(l.SmallAction,{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId("manageAccount"),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId("manageAccount"),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId("manageAccount"),icon:u.tc,label:(0,c.localizationKeys)("userButton.action__manageAccount"),onClick:o}),(0,n.tZ)(l.SmallAction,{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId("signOut"),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId("signOut"),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId("signOut"),icon:u.lv,label:(0,c.localizationKeys)("userButton.action__signOut"),onClick:d(m)})]})}):(0,n.tZ)(l.SmallActions,{role:"menu",elementDescriptor:c.descriptors.userButtonPopoverActions,elementId:c.descriptors.userButtonPopoverActions.setId("multiSession"),sx:e=>({gap:e.space.$1,paddingBottom:e.space.$2}),children:A?.map(e=>{let t;return t=Object.values(s.Zb).includes(e.id)?{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId(e.id),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId(e.id),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId(e.id)}:{elementDescriptor:c.descriptors.userButtonPopoverCustomItemButton,elementId:c.descriptors.userButtonPopoverCustomItemButton.setId(e.id),iconBoxElementDescriptor:c.descriptors.userButtonPopoverCustomItemButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverCustomItemButtonIconBox.setId(e.id),iconElementDescriptor:c.descriptors.userButtonPopoverActionItemButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionItemButtonIcon.setId(e.id)},n.tZ(l.Action,{...t,icon:e.icon,label:e.name,onClick:e.id===s.Zb.SIGN_OUT?d(m):()=>v(e),sx:e=>({border:0,padding:`${e.space.$2} ${e.space.$5}`,gap:e.space.$3x5}),iconSx:e=>({width:e.sizes.$4,height:e.sizes.$4}),iconBoxSx:e=>({minHeight:e.sizes.$4,minWidth:e.sizes.$4,alignItems:"center"})},e.id)})}),(0,n.BX)(l.Actions,{role:"menu",sx:e=>({borderTopStyle:e.borderStyles.$solid,borderTopWidth:e.borderWidths.$normal,borderTopColor:e.colors.$neutralAlpha100}),children:[I.map(e=>(0,n.tZ)(l.PreviewButton,{icon:u.nR,onClick:p(e),role:"menuitem",children:(0,n.tZ)(l.UserPreview,{user:e.user})},e.id)),(0,n.tZ)(l.Action,{elementDescriptor:c.descriptors.userButtonPopoverActionButton,elementId:c.descriptors.userButtonPopoverActionButton.setId("addAccount"),iconBoxElementDescriptor:c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:c.descriptors.userButtonPopoverActionButtonIconBox.setId("addAccount"),iconElementDescriptor:c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:c.descriptors.userButtonPopoverActionButtonIcon.setId("addAccount"),icon:u.mm,label:(0,c.localizationKeys)("userButton.action__addAccount"),onClick:a,iconSx:e=>({width:e.sizes.$9,height:e.sizes.$6}),iconBoxSx:e=>({minHeight:e.sizes.$9,minWidth:e.sizes.$6,alignItems:"center"}),spinnerSize:"md"})]})]})},a=e=>{let{handleSignOutAllClicked:t,elementDescriptor:o,elementId:r,iconBoxElementDescriptor:s,iconBoxElementId:i,iconElementDescriptor:d,iconElementId:p,label:a,sx:B,actionSx:m}=e;return(0,n.tZ)(l.Actions,{role:"menu",sx:[e=>({padding:e.space.$2}),B],children:(0,n.tZ)(l.Action,{elementDescriptor:o||c.descriptors.userButtonPopoverActionButton,elementId:r||c.descriptors.userButtonPopoverActionButton.setId("signOutAll"),iconBoxElementDescriptor:s||c.descriptors.userButtonPopoverActionButtonIconBox,iconBoxElementId:i||c.descriptors.userButtonPopoverActionButtonIconBox.setId("signOutAll"),iconElementDescriptor:d||c.descriptors.userButtonPopoverActionButtonIcon,iconElementId:p||c.descriptors.userButtonPopoverActionButtonIcon.setId("signOutAll"),icon:u.lv,label:a||(0,c.localizationKeys)("userButton.action__signOutAll"),onClick:t,variant:"ghost",colorScheme:"neutral",sx:[e=>({backgroundColor:e.colors.$transparent,padding:`${e.space.$2} ${e.space.$3}`,borderBottomWidth:0,borderRadius:e.radii.$lg}),m],spinnerSize:"md"})})}},1751:function(e,t,o){o.r(t),o.d(t,{UserButton:()=>v});var n=o(9180),r=o(9144),s=o(3812),i=o(3064),c=o(7718),l=o(2464),u=o(3799),d=o(9327),p=o(5241);let a=r.forwardRef((e,t)=>{let{close:o,...r}=e,l=()=>o?.(!1),{session:a}=(0,u.kP)(),B=(0,s.useUserButtonContext)(),{__experimental_asStandalone:m}=B,{authConfig:I}=(0,s.useEnvironment)(),{user:A}=(0,u.aF)(),{handleAddAccountClicked:v,handleManageAccountClicked:h,handleSessionClicked:P,handleSignOutAllClicked:C,handleSignOutSessionClicked:x,handleUserProfileActionClicked:g,otherSessions:b}=(0,p.Z)({...B,actionCompleteCallback:l,user:A});return(0,n.tZ)(c.RootBox,{elementDescriptor:i.descriptors.userButtonPopoverRootBox,children:(0,n.BX)(c.PopoverCard.Root,{elementDescriptor:i.descriptors.userButtonPopoverCard,ref:t,role:"dialog","aria-label":"User button popover",shouldEntryAnimate:!m,...r,children:[(0,n.BX)(c.PopoverCard.Content,{elementDescriptor:i.descriptors.userButtonPopoverMain,children:[(0,n.tZ)(c.UserPreview,{elementId:"userButton",user:A,sx:e=>({width:"100%",padding:`${e.space.$4} ${e.space.$5}`})}),I.singleSessionMode?(0,n.tZ)(d.fB,{handleManageAccountClicked:h,handleSignOutSessionClicked:x,handleUserProfileActionClicked:g,session:a,completedCallback:l}):(0,n.tZ)(d.uj,{session:a,otherSessions:b,handleManageAccountClicked:h,handleSignOutSessionClicked:x,handleSessionClicked:P,handleAddAccountClicked:v,handleUserProfileActionClicked:g,completedCallback:l})]}),(0,n.tZ)(c.PopoverCard.Footer,{elementDescriptor:i.descriptors.userButtonPopoverFooter,children:!I.singleSessionMode&&b.length>0&&(0,n.tZ)(d.gW,{handleSignOutAllClicked:C})})]})})});var B=o(5878);let m=({showName:e})=>{let{user:t}=(0,u.aF)();return t&&e?(0,n.tZ)(i.Text,{variant:"subtitle",as:"span",elementDescriptor:i.descriptors.userButtonOuterIdentifier,sx:[e=>({paddingLeft:e.space.$2})],children:(0,B.Pp)(t)||(0,B.xC)(t)}):null},I=(0,c.withAvatarShimmer)((0,r.forwardRef)((e,t)=>{let{sx:o,...r}=e,{user:l}=(0,u.aF)(),{showName:d}=(0,s.useUserButtonContext)();return(0,n.tZ)(i.Button,{elementDescriptor:i.descriptors.userButtonTrigger,variant:"roundWrapper",sx:[e=>({borderRadius:d?e.radii.$md:e.radii.$circle,color:e.colors.$colorText}),o],ref:t,"aria-label":`${e.isOpen?"Close":"Open"} user button`,"aria-expanded":e.isOpen,"aria-haspopup":"dialog",...r,children:(0,n.BX)(i.Flex,{elementDescriptor:i.descriptors.userButtonBox,isOpen:e.isOpen,align:"center",as:"span",gap:2,children:[(0,n.tZ)(m,{showName:d}),(0,n.tZ)(c.UserAvatar,{boxElementDescriptor:i.descriptors.userButtonAvatarBox,imageElementDescriptor:i.descriptors.userButtonAvatarImage,...l,size:e=>e.sizes.$7})]})})})),A=(0,c.withFloatingTree)(({children:e})=>{let{defaultOpen:t}=(0,s.useUserButtonContext)(),{floating:o,reference:i,styles:u,toggle:d,isOpen:p,nodeId:a,context:B}=(0,l.Sv)({defaultOpen:t,placement:"bottom-end",offset:8}),m=(0,r.useId)();return(0,n.BX)(n.HY,{children:[(0,n.tZ)(I,{ref:i,onClick:d,isOpen:p,"aria-controls":p?m:void 0,"aria-expanded":p}),(0,n.tZ)(c.Popover,{nodeId:a,context:B,isOpen:p,children:(0,r.cloneElement)(e,{id:m,close:d,ref:o,style:u})})]})}),v=(0,s.withCoreUserGuard)((0,c.withCardStateProvider)(()=>{let{__experimental_asStandalone:e}=(0,s.useUserButtonContext)();return(0,n.tZ)(i.Flow.Root,{flow:"userButton",sx:{display:"inline-flex"},children:e?(0,n.tZ)(a,{close:"function"==typeof e?e:void 0}):(0,n.tZ)(A,{children:(0,n.tZ)(a,{})})})}))},5241:function(e,t,o){o.d(t,{Z:()=>u});var n=o(3799),r=o(5809),s=o(7718),i=o(4264),c=o(4676),l=o(43);let u=e=>{let{setActive:t,signOut:o,openUserProfile:u}=(0,n.cL)(),d=(0,s.useCardState)(),{signedInSessions:p,otherSessions:a}=(0,i.j)({user:e.user}),{navigate:B}=(0,c.useRouter)();return{handleSignOutSessionClicked:t=>()=>0===a.length?o(e.navigateAfterSignOut):o(e.navigateAfterMultiSessionSingleSignOut,{sessionId:t.id}).finally(()=>d.setIdle()),handleManageAccountClicked:()=>"navigation"===e.userProfileMode?B(e.userProfileUrl||"").finally(()=>{(async()=>{await (0,l._v)(300),e.actionCompleteCallback?.()})()}):(u(e.userProfileProps),e.actionCompleteCallback?.()),handleUserProfileActionClicked:t=>"navigation"===e.userProfileMode?B(e.userProfileUrl||"").finally(()=>{(async()=>{await (0,l._v)(300),e.actionCompleteCallback?.()})()}):(u({...e.userProfileProps,...t&&{__experimental_startPath:t}}),e.actionCompleteCallback?.()),handleSignOutAllClicked:()=>o(e.navigateAfterSignOut),handleSessionClicked:o=>async()=>(d.setLoading(),t({session:o,redirectUrl:e.afterSwitchSessionUrl}).finally(()=>{d.setIdle(),e.actionCompleteCallback?.()})),handleAddAccountClicked:()=>((0,r.T7)(e.signInUrl||window.location.href),(0,l._v)(2e3)),otherSessions:a,signedInSessions:p}}}}]);